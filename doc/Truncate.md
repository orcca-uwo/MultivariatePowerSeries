##ENCODING ISO-8859-1
##PROCEDURE(help,nospec,label="MultivariatePowerSeries/Truncate",versionnew="{XENOMORPH}", versionupdated="{ZONKEY}") MultivariatePowerSeries[Truncate]
##TITLE(halfline="truncate a power series or univariate polynomial over power series or Puiseux series")
##    MultivariatePowerSeries[Truncate]
##ALIAS Truncate, MultivariatePowerSeries:-Truncate, MultivariatePowerSeries
##AUTHOR Ali Asadi masadi4@uwo.ca, Alex Brandt abrandt5@uwo.ca, Marc Moreno Maza moreno@csd.uwo.ca
##
##CALLINGSEQUENCE
##- Truncate('p', 'd')
##- Truncate('u', 'd')
##- Truncate('s', 'd', 'mode')
##
##PARAMETERS
##- 'p' : power series generated by this package
##- 'u' : univariate polynomial over power series or over Puiseux series generated by this package
##-(versionnew="{ZONKEY}") 's' : Puiseux series generated by this package
##- 'd' : (optional) non-negative integer
##-	'mode' : (optional) the literal names `powerseries` or `absolute`
##
##DESCRIPTION
##- The command ~Truncate(p, d)~ returns the sum of 
##  all homogeneous parts of 'p' of degree at most 'd'.
##  In other words, ~Truncate(p, d)~ returns the natural image of the power series 'p'
##  modulo the __"(d+1)^`th|`"__ power of the maximal ideal of the
##   ring of power series.
##INCLUDE PuiseuxSeriesIntro.mi
##-(versionnew="{ZONKEY}",name=mode) The command ~Truncate(s, d, mode)~ truncates the power series used to define
## 	the Puiseux series 's'. Then, it applies the change of variables given by 
##	the rays 'R'. Finally, it multiplies the result by the monomial given by 'E'. 
##	By default 'mode' is equal to 'powerseries'. In this mode, the returned terms
##	are not necessarily of degree less or equal than 'd'. 
##	Instead, the terms of the internal power series have degree at most 'd'.
##-	If the option 'mode=absolute' is specified, then 
##	~Truncate(s, d, mode=absolute)~ returns all the terms of 's' such that the
##	sum of the absolute value of their exponents is less or equal than 'd'. Note 
##	that this process may be very slow depending of the Puiseux series 's'.
##- If 'd' is greater than the current precision of 'p', then the necessary extra terms are computed.
##- If 'd' is not specified, all currently
##  computed terms are used and no extra ones are computed. In other words, the default value of 'd' is the precision of 'p'.
##- The command ~Truncate(u, d)~ returns the polynomial obtained
##  from 'u' by replacing each coefficient 'p' with the sum of the homogeneous parts of 'p' of degree at most 'd'.
##  In other words, each coefficient is replaced by its image modulo
##  the __"(d+1)^`th|`"__ power of the maximal ideal of the
##  ring of power series. If the coefficients of _u_ are Puiseux series,
##	then we truncate these coefficients in the way described above.
##- If 'd' is not specified, the precision of each coefficient is used. If the coefficients are
##  currently known to different precisions, they will consequently be truncated at different
##  degrees.
##
##INCLUDE assignment_warning.mi
##
##EXAMPLES
##> with(MultivariatePowerSeries):
##- We define the geometric power series in the variables _x_ and _y_.
##> a := GeometricSeries([x,y]);
##- It is initially computed only to low precision.
##> Truncate(a);
##<(verification="member") {1, 1+x+y}
##- If we update its precision, then the 'Truncate' command returns more terms.
##> UpdatePrecision(a, 3);
##> Truncate(a);
##< 1 + x+y + x^2+2*x*y+y^2 + x^3+3*x^2*y+3*x*y^2+y^3
##- We can get lower precision by specifying the truncation degree.
##> Truncate(a, 2);
##< 1 + x+y + x^2+2*x*y+y^2
##- We define a univariate polynomial over power series involving _a_.
##> f := UnivariatePolynomialOverPowerSeries([GeometricSeries(x), GeometricSeries(y), a], z);
##- The constant and linear coefficients of _z_ are known to a different precision than the
##  quadratic coefficient. By default, the 'Truncate' command will return all known coefficients
##  regardless of degree.
##> Truncate(f);
##<(verification="member") {1 + z + (1 + x+y + x^2+2*x*y+y^2 + x^3+3*x^2*y+3*x*y^2+y^3)*z^2,
##  1+x + (1+y)*z + (1 + x+y + x^2+2*x*y+y^2 + x^3+3*x^2*y+3*x*y^2+y^3)*z^2}
##- If we specify the truncation degree as 2, then more terms of the constant and linear coefficient
##  are computed and some terms of the quadratic coefficient are omitted.
##> Truncate(f, 2);
##< 1 + x + x^2 + (1 + y + y^2)*z + (1 + x+y + x^2+2*x*y+y^2) * z^2
##- Now, let's create a Puiseux series using 'a' as a base.
##> s := PuiseuxSeries(a, [x=u^(1/2)*v^(3/5),y=u*v^(-1/5)], [u=2,v=1/2]);
##- We truncate 's'.
##> Truncate(s);
##-	Note that to get the same answer, we can Truncate 'a', apply the change 
##	of variables [x=u^(1/2)*v^(3/5), y=u*v^(-1/5)], and then multiply
##	by _u^2*v^(1/2)_.
##>	eval(Truncate(a), [x=u^(1/2)*v^(3/5), y=u*v^(-1/5)])*u^2*v^(1/2);
##- Finally, we truncate 's' using 'mode=absolute'.
##> Truncate(s, 5, mode=absolute);
##- Finally, we create a univariate polynomial over power series from a list of Puiseux series.
##> h := UnivariatePolynomialOverPowerSeries([PuiseuxSeries(1), PuiseuxSeries(0), PuiseuxSeries(x, [x=x^(1/3)]), PuiseuxSeries(y, [y=y^(1/2)]), PuiseuxSeries((x+y)/(1+x+y), [x=x*y^(1/2),y=x*y^(-1)])], z);
##<(verification="type") object
##- We truncate '-h'.
##> Truncate(h, 5);
##< 1+(x^5*y^(5/2)+5*x^5*y+10*x^5/y^(1/2)+10*x^5/y^2+5*x^5/y^(7/2)+x^5/y^5-x^4*y^2-4*x^4*y^(1/2)-6*x^4/y-4*x^4/y^(5/2)-x^4/y^4+x^3*y^(3/2)+3*x^3+3*x^3/y^(3/2)+x^3/y^3-x^2*y-2*x^2/y^(1/2)-x^2/y^2+x*y^(1/2)+x/y)*z^4+y^(1/2)*z^3+x^(1/3)*z^2
##
##SEEALSO
##- "PowerSeries"
##- "PuiseuxSeries"
##- "GeometricSeries"
##- "UnivariatePolynomialOverPowerSeries"
##- "Precision"
##- "HomogeneousPart"
##- "UpdatePrecision"
##
##XREFMAP
##- PowerSeries : Help:MultivariatePowerSeries[PowerSeries]
##- PuiseuxSeries : Help:MultivariatePowerSeries[PuiseuxSeries]
##- GeometricSeries : Help:MultivariatePowerSeries[GeometricSeries]
##- UnivariatePolynomialOverPowerSeries : Help:MultivariatePowerSeries[UnivariatePolynomialOverPowerSeries]
##- Precision : Help:MultivariatePowerSeries[Precision]
##- HomogeneousPart : Help:MultivariatePowerSeries[HomogeneousPart]
##- UpdatePrecision : Help:MultivariatePowerSeries[UpdatePrecision]
